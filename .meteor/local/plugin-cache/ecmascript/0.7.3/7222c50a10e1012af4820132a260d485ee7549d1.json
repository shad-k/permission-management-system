{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"./allUsers.html","imported":[],"specifiers":[]},{"source":"./changeProfileInfo.js","imported":[],"specifiers":[]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/templating","imported":["Template"],"specifiers":[{"kind":"named","imported":"Template","local":"Template"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/ui/allUsers.js","filenameRelative":"/imports/ui/allUsers.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/ui/allUsers.js.map","sourceFileName":"/imports/ui/allUsers.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"allUsers"},"ignored":false,"code":"module.importSync(\"./allUsers.html\");\nmodule.importSync(\"./changeProfileInfo.js\");\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n\tMeteor: function (v) {\n\t\tMeteor = v;\n\t}\n}, 2);\nvar Template = void 0;\nmodule.importSync(\"meteor/templating\", {\n\tTemplate: function (v) {\n\t\tTemplate = v;\n\t}\n}, 3);\nvar Roles = void 0;\nmodule.importSync(\"meteor/alanning:roles\", {\n\tRoles: function (v) {\n\t\tRoles = v;\n\t}\n}, 4);\nTemplate.allUsers.helpers({\n\tusers: function () {\n\t\treturn Meteor.users.find({\n\t\t\t_id: {\n\t\t\t\t$ne: Meteor.userId()\n\t\t\t}\n\t\t});\n\t}\n});\nTemplate.allUsers.events({\n\t'click .blockUser': function (event) {\n\t\tMeteor.call('roles.blockUser', this._id);\n\t},\n\t'click .unblockUser': function (event) {\n\t\tMeteor.call('roles.unblockUser', this._id);\n\t},\n\t'click .changeProfileInfo': function (event) {\n\t\tdocument.querySelector(\".changeProfileDiv\").style.display = \"block\";\n\t\tvar user = Meteor.users.findOne({\n\t\t\t_id: this._id\n\t\t});\n\t\tdocument.querySelector(\".un\").value = user.username;\n\n\t\tif (user.username === \"root\") {\n\t\t\t// If user is root its profile will not be set or changed\n\t\t\tdocument.querySelector(\".name\").value = \"admin details can't be shown\";\n\t\t\tdocument.querySelector(\".email\").value = \"admin details can't be shown\";\n\t\t\tdocument.querySelector(\".phone\").value = \"admin details can't be shown\";\n\t\t} else {\n\t\t\tif (user.profile.name) document.querySelector(\".name\").value = user.profile.name;else document.querySelector(\".name\").value = \"no value set\";\n\t\t\tif (user.profile.email) document.querySelector(\".email\").value = user.profile.email;else document.querySelector(\".email\").value = \"no value set\";\n\t\t\tif (user.profile.phone) document.querySelector(\".phone\").value = user.profile.phone;else document.querySelector(\".phone\").value = \"no value set\";\n\t\t}\n\t},\n\t'click .removeUser': function (event) {\n\t\tMeteor.call('user.removeUser', this._id);\n\t},\n\t'click .updateUser': function (event) {\n\t\tvar name = document.querySelector(\".name\").value;\n\t\tvar email = document.querySelector(\".email\").value;\n\t\tvar phone = document.querySelector(\".phone\").value;\n\t\tvar username = document.querySelector(\".un\").value;\n\t\tMeteor.call('user.updateUser', username, name, email, phone, function (error, result) {\n\t\t\tif (error) {\n\t\t\t\talert(error);\n\t\t\t} else if (result === true) {\n\t\t\t\talert(\"User profile updated\");\n\t\t\t} else {\n\t\t\t\talert(result);\n\t\t\t}\n\t\t});\n\t}\n});","map":{"version":3,"sources":["/imports/ui/allUsers.js"],"names":["module","importSync","Meteor","v","Template","Roles","allUsers","helpers","users","find","_id","$ne","userId","events","event","call","document","querySelector","style","display","user","findOne","value","username","profile","name","email","phone","error","result","alert"],"mappings":"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","file":"/imports/ui/allUsers.js.map","sourcesContent":["// This file contains the code for displaying the user list and handling all the operations\n// concerning the users collection\n\nimport './allUsers.html';\n\nimport './changeProfileInfo.js';\n\nimport { Meteor } from 'meteor/meteor';\n\nimport { Template } from 'meteor/templating';\n\nimport { Roles } from 'meteor/alanning:roles';\n\nTemplate.allUsers.helpers({\n  users() {\n    return Meteor.users.find({_id: {$ne : Meteor.userId()}});\n  }\n});\n\n\nTemplate.allUsers.events ({\n\t'click .blockUser' (event) {\n\t\tMeteor.call('roles.blockUser', this._id);\n\t},\n\t'click .unblockUser' (event) {\n\t\tMeteor.call('roles.unblockUser', this._id);\n\t},\n\t'click .changeProfileInfo' (event) {\n\t\tdocument.querySelector(\".changeProfileDiv\").style.display = \"block\";\n\t\tvar user = Meteor.users.findOne({_id: this._id});\n\t\tdocument.querySelector(\".un\").value = user.username;\n\t\tif(user.username === \"root\") {\n\t\t\t// If user is root its profile will not be set or changed\n\t\t\tdocument.querySelector(\".name\").value = \"admin details can't be shown\";\n\t\t\tdocument.querySelector(\".email\").value = \"admin details can't be shown\";\n\t\t\tdocument.querySelector(\".phone\").value = \"admin details can't be shown\";\n\t\t}\n\t\telse {\n\t\t\tif(user.profile.name)\n\t\t\t\tdocument.querySelector(\".name\").value = user.profile.name;\n\t\t\telse\n\t\t\t\tdocument.querySelector(\".name\").value = \"no value set\";\n\t\t\tif(user.profile.email)\n\t\t\t\tdocument.querySelector(\".email\").value = user.profile.email;\n\t\t\telse\n\t\t\t\tdocument.querySelector(\".email\").value = \"no value set\";\n\t\t\tif(user.profile.phone)\n\t\t\t\tdocument.querySelector(\".phone\").value = user.profile.phone;\n\t\t\telse\n\t\t\t\tdocument.querySelector(\".phone\").value = \"no value set\";\n\t\t}\n\t},\n\t'click .removeUser' (event) {\n\t\tMeteor.call('user.removeUser', this._id);\n\t},\n\t'click .updateUser' (event) {\n\t\tvar name = document.querySelector(\".name\").value;\n\t\tvar email = document.querySelector(\".email\").value;\n\t\tvar phone = document.querySelector(\".phone\").value;\n\n\t\tvar username = document.querySelector(\".un\").value;\n\n\t\tMeteor.call('user.updateUser', username, name, email, phone, function(error, result) {\n\t\t\tif(error) {\n\t\t\t\talert(error);\n\t\t\t}\n\t\t\telse if(result === true) {\n\t\t\t\talert(\"User profile updated\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\talert(result);\n\t\t\t}\n\t\t});\n\t}\n});"]},"hash":"7222c50a10e1012af4820132a260d485ee7549d1"}
